# +----------------+
# | CFG-UPDATE INFO \
# +------------------+-------------------------------------------------------+
# | The script handles your configuration file updates in 5 stages:          |
# +---------+----------------------------------------------------------------+
# | STAGE 1 | Automatic overwriting of unmodified files and binaries         |
# | STAGE 2 | Automatic (diff3) merging of modified files (if backup exists) |
# | STAGE 3 | Manual 3-way merging of modified files (if backup exists)      |
# | STAGE 4 | Manual 2-way merging of modified files                         |
# | STAGE 5 | Manual update of files that can't be updated in stages 1,2,3,4 |
# +---------+----------------------------------------------------------------+
# | Stage 1 and 2 will safely update all files that can be handled without   |
# | user input and leaves the files that do need imput for manual updating.  |
# | Stage 3 will only work if enabled and a tool with 3-way merge support is |
# | selected. Stage 4 works with all supported tools, it allows you to merge |
# | the two files manually with the tool of your choice. Stage 5 handles the |
# | updates that couldn't be updated in the other stages.                    |
# +--------------------------------------------------------------------------+
# | The state of the file determines in which stage(s) it can be updated:    |
# +-------------------+----+-----------------+-------------------------------+
# | Modified File     | MF | STAGE -,2,3,4,- | Can have custom settings      |
# | Modified Binary   | MB | STAGE -,-,-,-,5 | Has been replaced (virus?)    |
# | Unmodified File   | UF | STAGE 1,2,3,4,- | Does not have custom settings |
# | Unmodified Binary | UB | STAGE 1,-,-,-,5 | Does not have custom functions|
# | Custom File       | CF | STAGE -,2,3,4,- | Not installed with Portage    |
# | Custom Binary     | CB | STAGE -,-,-,-,5 | Not installed with Portage    |
# | Link to File      | LF | STAGE -,-,-,-,5 | Link will be replaced by file |
# | File to Link      | FL | STAGE -,-,-,-,5 | File will be replaced by link |
# | Link to Link      | LL | STAGE -,-,-,-,5 | Link will be replaced by link |
# +-------------------+----+-----------------+-------------------------------+
# | As you can see in the table above, if you for example disable STAGE 5    |
# | cfg-update will not be able to update files with states MB,CB,LF,FL,LL.  |
# | If you don't trust the automatic 3-way merging you can disable STAGE 2   |
# | to update those files manually in STAGE 3. If your tool doesn't support  |
# | 3-way merging, STAGE 3 will be skipped and updating will take place in   |
# | STAGE 4.                                                                 |
# | If you want to use cfg-update as a cronjob you can use the "-a" option   |
# | to force cfg-update to only do the "automatic" stages (1,2) and skip the |
# | updates that need manual input so you can do them later...               |
# +--------------------------------------------------------------------------+


# +----------+
# | MERGETOOL \
# +------------+-------------------------------------------------------------+
# | The recommended tool for merging is xxdiff but you can also use other    |
# | tools if you don't like xxdiff.  The Supported tools are listed below:   |
# +---------+-----+--------------------------+-------------------------------+
# | xxdiff  | GUI | KDE   (or Gnome with QT) |                               |
# | kdiff3  | GUI | KDE   (or Gnome with QT) |                               |
# | kompare | GUI | KDE   (or Gnome with QT) | STAGE 3 not supported!        |
# | meld    | GUI | Gnome (or KDE with GTK)  |                               |
# | gtkdiff | GUI | Gnome (or KDE with GTK)  | STAGE 3 not supported!        |
# | tkdiff  | GUI | Gnome (or KDE with TK)   |                               |
# | sdiff   | CLI | Shell                    | STAGE 3 not supported!        |
# +---------+-----+--------------------------+-------------------------------+
MERGETOOL = /usr/bin/xxdiff


# +--------+
# | BACKUPS \
# +----------+---------------------------------------------------------------+
# | You should leave the backups enabled because cfg-update uses the backups |
# | for automatic 3-way merging! If you have your own backup solution for    |
# | your configuration files, don't want the extra (hidden) files in your    |
# | protected directories, don't want to use the restore function and don't  |
# | want to use the 3-way merging functionality of cfg-update, then you can  |
# | disable the backups. It's highly recommended to leave this enabled.      |
# +--------------------------------------------------------------------------+
ENABLE_BACKUPS = yes


# +--------+
# | STAGE 1 \
# +----------+---------------------------------------------------------------+
# | Automatic overwriting of unmodified configuration files and binaries...  |
# | Portage stores MD5 checksums of files during installation of packages.   |
# | The checksums can be used to determine if a file has been modified after |
# | installation. If it hasn't been modified it contains default settings    |
# | and it can be safely overwritten with a newer version.                   |
# +--------------------------------------------------------------------------+
ENABLE_STAGE1 = yes


# +--------+
# | STAGE 2 \
# +----------+---------------------------------------------------------------+
# | Automatic (diff3) merging of modified configuration files...             |
# | cfg-update saves backups of the updated files. These backups can be used |
# | for 3-way merges. All files that have been updated at least one time are |
# | candidates for this type of automatic update. diff3 will use the backup  |
# | of the previous update as the ancestor file to determine which lines     |
# | contain custom settings. If cfg-update encounters a merge-conflict       |
# | (ancestor, current and new file have 3 different values) it will abort   |
# | the update so you can solve the conflict manually with the MERGETOOL.    |
# +--------------------------------------------------------------------------+
ENABLE_STAGE2 = yes


# +--------+
# | STAGE 3 \
# +----------+---------------------------------------------------------------+
# | Manual 3-way merging of modified configuration files...                  |
# | If a merge-conflict has been detected in STAGE 2, you can now solve it   |
# | manually in the MERGETOOL. Simply click the line(s) you need. When you   |
# | are done, cfg-update will replace the current configuration file with the|
# | merged result.                                                           |
# +--------------------------------------------------------------------------+
ENABLE_STAGE3 = yes


# +--------+
# | STAGE 4 \
# +----------+---------------------------------------------------------------+
# | Manual 2-way merging of modified configuration files...                  |
# | If no backups of previous updates are found, you must merge the current  |
# | configuration file with the update in the MERGETOOL. Simply click the    |
# | line(s) you need. When you are done, cfg-update will replace the current |
# | configuration file with the merged result.                               |
# +--------------------------------------------------------------------------+
ENABLE_STAGE4 = yes


# +--------+
# | STAGE 5 \
# +----------+---------------------------------------------------------------+
# | Manual updating of files that can't be updated in the other stages...    |
# | These updates will need your full attention! There are several ways to   |
# | deal with these updates. cfg-update will present you with a number of    |
# | options depending on the situation.                                      |
# +--------------------------------------------------------------------------+
ENABLE_STAGE5 = yes


##############################################################################
###     ONLY CHANGE THE SETTINGS BELOW THIS LINE IF YOU REALLY HAVE TO     ###
##############################################################################
#
# ALIASFILE     = /root/.bashrc           # this file contains the alias for the emerge command
# PORTAGECONFIG = /etc/make.conf          # this file contains PORT_LOGDIR and is used to find the portage logfile
# INDEXFILE     = /usr/lib/cfg-update/checksum.index  # this file contains all MD5 checksums
# XXDIFF_STYLE  = "--style Keramik"       # this variable controls the style of xxdiff
#
##############################################################################
### DO NOT CHANGE THE SETTINGS BELOW THIS LINE, THEY WILL BREAK CFG-UPDATE ###
##############################################################################
#
# CONFIG_NEW    = "._cfg????_*"           # search string used to find the config file updates
# RM_NEW        = "\._cfg...._"           # regular expression to strip CONFIG_NEW from filename
# TEMP_NEW      = "._temp-new-cfg_*"      # filename format for temporary storage of config file update during merging
# BACKUP_NEW    = "._new-cfg_*"           # filename format for backup new config file
# RESTORE_NEW   = "._cfg0000_*"           # filename format for restoring the new config file
# RM_OLD        = "\._old-cfg_"           # regular expression to strip BACKUP_OLD from filename
# TEMP_OLD      = "._temp-old-cfg_*"      # filename format for temporary storage of current config file during merging
# BACKUP_OLD    = "._old-cfg_*"           # filename format for backup current config file
# RESTORE_OLD   = "*"                     # filename format for restoring the old config file
# MERGED        = "*.merge"               # filename format for storage of the merged result
#
